---
title: "Two TCKs for Eclipse - What is really in it for Open Source?"
date: 2013-07-31 06:45:00 +0000
layout: post
tags: ["java", "TCK", "jcp", "eclipse"]
slug: "two-tcks-for-eclipse-what-is-really-in"
link: ":year/:month/:slug"
aliases:
 - ":year/:month/:slug:.html!"
url: /2013/07/two-tcks-for-eclipse-what-is-really-in.html
---

Back in May Oracle <a href="http://www.oracle.com/us/corporate/press/1943311" target="_blank">awarded a Compatibility Testing Scholarship</a> to the Eclipse Foundation. This got some attention <a href="https://blogs.oracle.com/theaquarium/entry/oracle_grants_tcks_for_eclipselink" target="_blank">in media</a> during the last days and I just wanted to make sure that I shine some light on the whole process and the action in detail. What does look like a simple and honest gift on first sight actually has more aspects in it. But lets start at the beginning: 
<br>
<br><b>Technology Compatibility Kit</b>
<br>
 Covered by the Java Community Process (JCP) both Java as a language and the various platforms on top (Java SE, Java EE, Java ME) are developed. Each JSR (Java Specification Request) includes an EG (Expert Group) a bunch of documents and of course a reference implementation (RI) and a corresponding TCK (Technology Compatibility Kit). The TCK can be executed against implementations and checks them for compliance with the specification. So it basically is the code equivalent of the specification document. Most TCKs consist of a bunch of test cases as well as a "test harness" which executes the tests. If there is a TCK per JSR it is safe to assume that there are at least as many TCKs available as we have active JSRs in the JCP. But that is only a theoretical thought. Practically there aren't. At least not publicly avaiable. &nbsp;Besides JBatch, CDI and Bean Validation I can't think of much more. And those are only part of the Java EE platform which has at least 28 specifications. The majority of TCKs unfortunately is under lock and key at Oracle. But why? The main reason for this is that the TCKs are also used as a tools for the platform certification. Successfully running a TCK against an implementation proves it's correctness and with that somehow it's compliance.
<br>
<br><b>What does platform certification actually mean?</b>
<br>
 The platform compatibility is an excellent advert for products. The <a href="http://www.oracle.com/technetwork/java/javaee/overview/compatibility-jsp-136984.html">Java EE compatibility list</a> is a Who-is-Who of the Java EE server market. If you're not on that list with your product you basically don't have a chance of being recognized. With Apache Tomcat being the only known exception to that rule. But what does it take to get the certification? For Java EE there is the Java EE Compatibility Test Suite (CTS) which probably consists of little more than the sum of the individual TCKs. Honestly I have not seen it. You have to become a <a href="http://www.oracle.com/technetwork/java/javaee/javaee-faq-jsp-135209.html#compatibilitytests">licensee of Oracle</a> to get access to it. And this is exactly where it is starting to become expensive. I do not know how expensive exactly but once you payed you can access the CTS through the <a href="">Java Partner Engineering web site</a>. There is only one alternative way of getting hands on the CTS. Going through the&nbsp;<a href="http://www.oracle.com/technetwork/java/index-137188.html">Compatibility Testing Scholarship Program</a>&nbsp;which is a way for non-profit organizations and individuals to apply for a free-of-charge CTS. The requests are judged by a review board. There is a <a href="http://www.oracle.com/technetwork/java/tck-review-board-149992.pdf">PDF</a>&nbsp;out there which explains how this process exactly works. Beside the ASF various other organizations and individuals gained access to individual TCKs and CTS as of today. Now that you know about the basic program and certification it is easier to look at the details for the two Eclipse projects that has been granted a CTS Scholarship. I need to preface the following with a little disclaimer. I only can draw my conclusions from what is publicly known. I don't have any insights or further information on the reasons behind. It might be much simpler than what I came up with ...
<br>
<br><b>EclipseLink - the JPA Reference Implementation</b>
<br>
 According to press release from early May Oracle demonstrates its "commitment to Java developers and the open source community" by granting access to two TCKs and related support services to the Eclipse Foundation. Time to start wondering. Wasn't EclipseLink the RI for JPA? What exactly are they doing if not building the TCK for JPA themselves, right? Why do they need a license?
<br>
 EclipseLink has its roots in TopLink. Anyone who knows the <a href="http://www.oracle.com/technetwork/topics/history-of-toplink-101111.html">history of TopLink</a> knows that this is a relatively old product that belonged to WebGain before it has been acquired&nbsp;by Oracle. WebGain was a strong Eclipse supporter and even a member on the&nbsp;&nbsp;Board of Directors back in 2002. Only five years after its acquisition by Oracle <a href="http://www.oracle.com/us/corporate/press/015916_EN">TopLink was donated to the Eclipse Foundation</a> and has been there <a href="" target="_blank">ever since</a>. EclipseLink is available under the EPL 1.0. The project itself does not contain the TCK. A difficult situation for a RI. Looking at the <a href="">list of committers</a> isn't really exciting. 30 people. And only one non-Oracle. Why do I believe that this team actually owns the TCK (Oracle internally) and even develops it? Strictly speaking, EclipseLink has a license that doesn't fit the TCK licensing rules. Granting the Scholarship license here simply corrects some legal issues in that constellation.
<br>
<br><b>Virgo - the Java EE Web Profile Server</b>
<br>
 But for Virgo the granted license really makes a difference, right? Maybe. Virgo is the former Spring dm server which was donated to the Eclipse Foundation by&nbsp;<a href="" target="_blank">SpringSource back in 2010</a>. The <a href="http://projects.eclipse.org/projects/rt.virgo/developers" target="_blank">list of committers</a>&nbsp;paints a different picture than the TopLink list. It is not just SAP behind every name. Committers spread equally among three companies. &nbsp;SAP, Pivotal and Tasktop Technologies. The latter has an interesting management board. Former SpringSource COO <a href="http://tasktop.com/about/team/#board" target="_blank">Neelan Choksi and Rod Johnson himself</a>&nbsp;are members. This might indicate that Pivotal has a little more influence on the project than SAP. Anyway, both companies are most likely not big Oracle buddies. The scholarship license isn't a gift for them obviously. In fact, Virgo is already Java EE 6 certified. However, under another name. The SAP NetWeaver Cloud has built its<a href="http://www.oracle.com/technetwork/java/javaee/community/default-1883076.html" target="_blank"> Java EE 6 Web Profile</a> offering on Virgo. So SAP has probably acquired a license from Oracle and certified Virgo themselves. I don't know for sure but someone could have come up with the idea that it is cheaper to use an already certified server instead of paying the annual royalties&nbsp;year by year. Given the fact that the Eclipse Foundation is a non-profit organization it was easy to apply for the Scholarship program to get this sorted. At least in this case there is a positive side-effect. Virgo now has the chance of becoming another Java EE certified server. SAP already has proven that it is possible. Sooner of later the community will earn the profit by probably having a new EE 7 certified OSS server.
<br>
<br><b>But it is a positive sum below the line, right?</b>
<br>
 Two new projects gained access to the TCK of the specification they are implementing. That is positive. Looking at the total sum of publicly available TCKs it is still frustrating. Especially in the EclipseLink case it is frustrating because the TCKs may not at all be available in public. An&nbsp;<a href="https://java.net/projects/jpa-spec/lists/jsr338-experts/archive/2012-07/message/18" target="_blank">elongated discussion on the JPA</a> mailing list from last year discuss this problem a bit and illustrates the drawbacks. Although it is getting better with the changes made by the <a href="http://jcp.org/en/jsr/detail?id=348" target="_blank">JSR-348</a>. We're still not there.&nbsp;In fact I expect that the TCKs are available to all interested parties. This would improve quality of the specifications and the reference implementations by finding holes in the specs and also inadequately tested areas of RIs. Both will prevent many errors from affecting users. As key part of JSR 358 is the work done towards a new licensing model for TCKs. An <a href="https://java.net/projects/jsr358/pages/home" target="_blank">accompanying Java.net project</a> contains all the discussion materials and is publicly accessible. Everyone is free to join the discussion and express his or her opinion. The <a href="https://java.net/projects/jsr358/lists/observers/archive" target="_blank">Observer mailing list</a> is available to any registered java.net user. If you're interested in the view of CloudBees, Red Hat and IBM onto licensing issues you can find some more material on the <a href="https://java.net/projects/jsr358/pages/Presentations" target="_blank">presentations page</a>. Oracle itself proposes to proceed with standard TCK licensing models in the future version of the JCP:
<br>
<blockquote>
 "TCKs for all future JSRs must be made available for certification and branding purposes under one or more of the Approved Open Source Licenses and / or a Standard Commercial TCK License. The TCK for all future non-umbrella JSRs must be made available to all Participants in the relevant RI open source project under a standard JCP Community TCK License. " (Source: <a href="http://jcp.org/aboutJava/communityprocess/ec-public/materials/2013-05-1415/Oracle-JSR-358.pdf" target="_blank">Oracle's Proposal for JSR 358</a>, PDF, pages 15 +16)
</blockquote> That would be a step in the right direction and would truly help the open source community. If the granted TCKs are a gift or not: It simply isn't enough to cure today's problems. We need a general change if it should be better in the future.